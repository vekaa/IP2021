!function(e,t,n,o,i,r,a){"use strict";var s,l,d,u,c,g=["theme","tabsInsertSpaces","indentSize","tabSize","ruler"],p=[{label:"Automatic",value:"automatic"},{label:"Light",value:"vs"},{label:"Dark",value:"vs-dark"},{label:"High Contrast Dark",value:"hc-black"}];s=0==window.apex_img_dir.indexOf("/")?document.location.protocol+"//"+document.location.host+window.apex_img_dir:window.apex_img_dir,l=s+"libraries/monaco-editor/0.20.0/min",d=s+"libraries/monaco-editor/apex/apex-js-api.d.ts",u=s+"libraries/monaco-editor/apex/mle-js-oracledb.d.ts",c=s+"libraries/monaco-editor/apex/quicksql.js";var m={requireConfigured:!1,themesConfigured:!1},f={};function h(e,t){fetch(e).then(e=>e.text()).then(e=>{f[t]=monaco.languages.typescript.javascriptDefaults.addExtraLib(e)}).catch(t=>i.error("Code Editor: could not fetch Typescript definition file from "+e,t))}function b(e,t){monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES6,allowJs:!0,allowNonTsExtensions:!0,noLib:"mle-javascript"==e}),monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({diagnosticCodesToIgnore:t.allowNamelessFunctions?[1003]:[]}),"javascript"==e?(f.mleDts&&(f.mleDts.dispose(),delete f.mleDts),f.apexDts||(f.apexDts=h(d,"apexDts"))):"mle-javascript"==e&&(f.apexDts&&(f.apexDts.dispose(),delete f.apexDts),f.mleDts||(f.mleDts=h(u,"mleDts")))}function v(){m.themesConfigured=!0,monaco.editor.defineTheme("apex-vs",{inherit:!0,base:"vs",rules:[{token:"string.sql",foreground:"b26100"},{token:"keyword.sql",foreground:"c74634"},{token:"predefined.sql",foreground:"7e5e8a"},{token:"operator.sql",foreground:"000000"},{token:"atom.sql",foreground:"398459"},{token:"function.sql",foreground:"795E26"},{token:"table.quicksql",foreground:"1E84BF",fontStyle:"bold"},{token:"view.quicksql",foreground:"008855",fontStyle:"bold"},{token:"list.quicksql",foreground:"b26100"},{token:"keywords.quicksql",foreground:"c74634"},{token:"types.quicksql",foreground:"398459"}]}),monaco.editor.defineTheme("apex-vs-dark",{inherit:!0,base:"vs-dark",rules:[{token:"string.sql",foreground:"ecbb76"},{token:"keyword.sql",foreground:"f14840"},{token:"predefined.sql",foreground:"a687b3"},{token:"operator.sql",foreground:"D4D4D4"},{token:"atom.sql",foreground:"259856"},{token:"function.sql",foreground:"DCDCAA"},{token:"table.quicksql",foreground:"1E84BF",fontStyle:"bold"},{token:"view.quicksql",foreground:"259856",fontStyle:"bold"},{token:"list.quicksql",foreground:"ecbb76"},{token:"keywords.quicksql",foreground:"f14840"},{token:"types.quicksql",foreground:"259856"}]}),monaco.editor.defineTheme("apex-hc-black",{inherit:!0,base:"hc-black",rules:[{token:"string.sql",foreground:"ecbb76"},{token:"keyword.sql",foreground:"f14840"},{token:"predefined.sql",foreground:"a687b3"},{token:"operator.sql",foreground:"D4D4D4"},{token:"atom.sql",foreground:"259856"},{token:"function.sql",foreground:"DCDCAA"},{token:"table.quicksql",foreground:"1E84BF",fontStyle:"bold"},{token:"view.quicksql",foreground:"259856",fontStyle:"bold"},{token:"list.quicksql",foreground:"ecbb76"},{token:"keywords.quicksql",foreground:"f14840"},{token:"types.quicksql",foreground:"259856"}]})}function C(){window.MonacoEnvironment={getWorkerUrl:function(e,t){return"data:text/javascript;charset=utf-8,"+encodeURIComponent(["self.MonacoEnvironment = {",`    baseUrl: "${l}"`,"};",`importScripts("${l}/vs/base/worker/workerMain.js");`].join("\n"))}},require.config({paths:{vs:l+"/vs"}});var e,t=o.getLanguage().toLowerCase();["zh-tw","zh-cn"].indexOf(t)>-1?e=t:(t=t.split("-")[0],["de","es","fr","it","ja","ko","ru"].indexOf(t)>-1&&(e=t)),e&&require.config({"vs/nls":{availableLanguages:{"*":e}}}),m.requireConfigured=!0}function _(t){var n="apex-"+(e("body").is('[class*="apex-theme-dark"]')?"vs-dark":"vs");return"automatic"==t?n:["vs","vs-dark","hc-black"].indexOf(t)>-1?"apex-"+t:(i.info('Theme "'+t+'" is not a valid Monaco. Using automatic instead.'),n)}function y(e){return n.getMessage(e)}window.require&&C(),window.monaco&&v(),null==window.monaco&&"function"==typeof require&&require(["vs/editor/editor.main"],(function(){m.themesConfigured||v()})),e.widget("apex.codeEditor",{version:"20.2",widgetEventPrefix:"codeEditor",options:{language:"javascript",value:"",readOnly:!1,autofocus:!1,ariaLabel:"",errors:[],warnings:[],suggestions:null,javascriptOptions:{allowNamelessFunctions:!1},minimap:!0,lineNumbers:!0,wordWrap:!1,scrollBeyondLastLine:!0,wordBasedSuggestions:!0,quickSuggestions:!0,toolbar:!0,theme:"automatic",tabsInsertSpaces:!0,indentSize:"4",tabSize:"4",ruler:!1,onInitialized:null,codeComplete:null,validateCode:null,queryBuilder:null,preferencesChanged:null},_contextKeys:{},_create:function(){var n=this,o=this.options;function i(){var i=n.element[0],r=e(i),a=e('<div class="a-MonacoEditorContent"></div>'),s=e('<div class="a-MonacoEditor-toolbar"></div>'),l=e('<div class="a-MonacoEditor-editor"></div>');r.append(a),o.toolbar&&(a.append(s),n._initNotificationBar(),n._context=n._createContext(),n._initToolbar(s)),a.append(l),["javascript","mle-javascript"].includes(o.language)&&b(o.language,o.javascriptOptions);var d,u=monaco.editor.create(l[0],{value:o.value,language:o.language.replace("mle-",""),readOnly:o.readOnly,detectIndentation:!1,insertSpaces:o.tabsInsertSpaces,indentSize:o.indentSize,tabSize:o.tabSize,rulers:o.ruler?[80]:[],minimap:{enabled:o.minimap&&o.value.split("\n").length>=100},lineNumbers:o.lineNumbers?"on":"off",scrollBeyondLastLine:o.scrollBeyondLastLine,lineNumbersMinChars:4,theme:_(o.theme),scrollbar:{alwaysConsumeMouseWheel:!1},fixedOverflowWidgets:!0,ariaLabel:o.ariaLabel,wordWrap:"plaintext"==o.language||"html"==o.language||(o.wordWrap?"on":"off"),wordBasedSuggestions:"plaintext"!=o.language&&o.wordBasedSuggestions,quickSuggestions:"plaintext"!=o.language&&o.quickSuggestions});n._editor=u,o.toolbar&&(n._updateNotifications(),n._populateContext()),window.addEventListener("resize",t.debounce((function(){n._resize()}),200)),r.on("resize",(function(e){n._resize(),e.stopPropagation()})),o.autofocus&&n.focus(),u.getModel().onDidChangeContent((function(e){n.element.children("textarea").trigger("keypress",e)})),u.onDidFocusEditorWidget((function(){d=u.getValue()})),u.onDidBlurEditorWidget((function(){n.element.children("textarea").trigger("blur"),d!==u.getValue()&&n.element.children("textarea").trigger("change")})),o.minimap&&u.getModel().onDidChangeContent(t.debounce((function(){u&&u.getModel()&&u.updateOptions({minimap:{enabled:u.getModel().getLineCount()>=100}})}),1e3)),n._configureCustomSuggestionProvider(),o.onInitialized&&o.onInitialized(u)}function r(){"quicksql"!=o.language||monaco.languages.getEncodedLanguageId("quicksql")?i():a.loadScript({path:c},(function(){i()}))}function s(){void 0===window.monaco?require(["vs/editor/editor.main"],(function(){m.themesConfigured||v(),r()})):r()}this.element.addClass("a-MonacoEditor"),this.baseId=this.element[0].id||"aCE",void 0===window.require?a.loadScript({path:l+"/vs/loader.js"},(function(){m.requireConfigured||C(),s()})):s(),this._on(this._eventHandlers)},_eventHandlers:{resize:function(e){this._resize(),e.stopPropagation()},focusin:function(e,t){this.element.addClass("is-active")},focusout:function(e,t){this.element.removeClass("is-active")}},_destroy:function(){this._editor&&(this._disposeAllEditorSpecificDisposables(),this._editor.dispose())},_setOption:function(e,t){var n=this.options,o=this._editor;this._super(e,t),"errors"===e||"warnings"===e?this._updateNotifications():"language"==e?this._setLanguage(t):"tabsInsertSpaces"==e?o.updateOptions({insertSpaces:t}):"ruler"==e?o.updateOptions({rulers:t?[80]:[]}):"theme"==e?n.theme!=t&&monaco.editor.setTheme(_(t)):o.updateOptions({pKey:t})},setValue:function(e){this._editor.setValue(e)},getValue:function(){return this._editor?this._editor.getValue():this.options.value},getEditor:function(){return this._editor},getSelection:function(){return this._editor.getModel().getValueInRange(this._editor.getSelection())},showNotification:function(e){var t=this.element.find(".a-MonacoEditor-notification").show().children(".a-MonacoEditor-message").first();"string"==typeof e?t.html(e):"object"==typeof e&&e instanceof jQuery?(t.empty(),t.append(e)):i.error("The notification message must be a string or a jQuery object"),this._resize()},resetNotification:function(){this.element.find(".a-MonacoEditor-notification").children(".a-MonacoEditor-message").empty(),this.element.find(".a-MonacoEditor-notification").hide(),this._resize()},showSuccessNotification:function(e){this.showNotification(`<ul><li class="is-success">${e}</li></ul>`)},focus:function(){this.element.addClass("is-active"),this._editor.focus()},setCursor:function(e,t){this._editor.setPosition({lineNumber:e,column:t})},setCursorToEnd:function(e){var t=this._editor,n=t.getModel(),o=n.getLineCount(),i=n.getLineMaxColumn(o);this.setCursor(o,i),e&&t.revealLine(o)},changeGeneration:function(){return this._editor.getModel().getAlternativeVersionId()},isClean:function(e){return this._editor.getModel().getAlternativeVersionId()==e},getPreferencesString:function(){for(var e=this.options,t={},n=0;n<g.length;n++){var o=g[n];t[o]=e[o]}return JSON.stringify(t)},_editorSpecificDisposables:{},_addEditorSpecificDisposable:function(e,t){var n=this._editorSpecificDisposables;n[e]&&n[e].dispose(),n[e]=t},_disposeAllEditorSpecificDisposables:function(){var e=this._editorSpecificDisposables,t=Object.keys(e);for(var n of t)e[n].dispose(),delete e[n]},_configureCustomSuggestionProvider:function(){var e,t,n=this._editor,o=this.options,r=o.language.replace("mle-",""),a=o.suggestions;if(a){if(Array.isArray(a))e=a;else{if("function"!=typeof a)return void i.error("Suggestions type not supported");e=a(r)}e=e.map(e=>(e.insertText=e.insertText||e.label,e)),this._addEditorSpecificDisposable("global-suggestions",monaco.languages.registerCompletionItemProvider(r,{provideCompletionItems:function(o,i){return n.hasTextFocus()?(t=o.getWordUntilPosition(i),{suggestions:e.map(e=>(e.range={startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:t.startColumn,endColumn:t.endColumn},e.kind=monaco.languages.CompletionItemKind.File,e))}):{}}})),"mle-javascript"==o.language&&this._addEditorSpecificDisposable("mle-js-apex-env",monaco.languages.registerCompletionItemProvider("javascript",{triggerCharacters:["."],provideCompletionItems:function(o,i,r){return n.hasTextFocus()&&r.triggerKind==monaco.languages.CompletionTriggerKind.TriggerCharacter&&"."==r.triggerCharacter&&o.getLineContent(i.lineNumber).substr(0,i.column-2).endsWith("apex.env")?(t=o.getWordUntilPosition(i),{suggestions:e.map(e=>(e.range={startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:t.startColumn,endColumn:t.endColumn},e.kind=monaco.languages.CompletionItemKind.File,e))}):{}}}))}},_getLineFromMessage:function(e){var t=e.indexOf("ORA-06550");if(t>-1){var n=e.slice(t).match(/\d{1,}/g),o=parseInt(n[1],10),i=parseInt(n[2],10);return isNaN(o)&&(o=0),isNaN(i)&&(i=0),{lineNumber:o,columnNumber:i}}return null},_gotoPosition:function(e,t){var n=this._editor;n&&(n.revealLineInCenter(e),n.setPosition({lineNumber:e,column:t}),setTimeout((function(){n.focus()}),100))},_updateNotifications:function(){var n=this,o=n.options,i=e("<ul/>");if(o.errors.length||o.warnings.length){for(let r=0;r<o.errors.length;r++){let a=t.escapeHTML(o.errors[r]),s=n._getLineFromMessage(a),l=e('<li class="is-error" style="cursor: pointer;"></li>');s?l.append(e(`<a data-line="${s.lineNumber}" data-column="${s.columnNumber}"></a>`).html(a)):l.html(a),i.append(l)}for(let r=0;r<o.warnings.length;r++){let a=t.escapeHTML(o.warnings[r]),s=n._getLineFromMessage(a),l=e('<li class="is-warning" style="cursor: pointer;"></li>');s?l.append(e(`<a data-line="${s.lineNumber}" data-column="${s.columnNumber}"></a>`).html(a)):l.html(a),i.append(l)}n.showNotification(i)}else n.resetNotification();e("a[data-line]",i).on("click",(function(){n._gotoPosition(e(this).data("line"),e(this).data("column"))})),n._updateLineMessages()},_updateLineMessages:function(){var e,n=this.options,o=this._editor,i=[];function r(e){var n=e.message.split(":").slice(e.afterColonIndex).join(":").trim();return e.removeHtmlTags&&(n=t.stripHTML(n)),n.length?n:e.message}for(let t=0;t<n.errors.length;t++)(e=this._getLineFromMessage(n.errors[t]))&&i.push({startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.columnNumber,endColumn:1e3,message:r({message:n.errors[t],afterColonIndex:4,removeHtmlTags:!0}),severity:monaco.MarkerSeverity.Error});for(let t=0;t<n.warnings.length;t++)(e=this._getLineFromMessage(n.warnings[t]))&&i.push({startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.columnNumber,endColumn:1e3,message:r({message:n.warnings[t],afterColonIndex:3,removeHtmlTags:!1}),severity:monaco.MarkerSeverity.Warning});monaco.editor.setModelMarkers(o.getModel(),"lineMessages",i),i.length&&this._gotoPosition(i[0].startLineNumber,i[0].startColumn)},_resize:function(){var e=this._editor;e&&e.layout()},_initNotificationBar:function(){var o=this,i=t.htmlBuilder(),r=this.baseId+"_mClose";i.markup("<div class='a-MonacoEditor-notification' style='display:none;'><div class='a-MonacoEditor-message'></div>"),function(e,t,o,i,r,a,s){var l=o?n.formatMessage("CODE_EDITOR.SHORTCUT_TITLE",r,o):r;e.markup("<button").attr("id",t).attr("title",l).attr("aria-label",l).optionalBoolAttr("disabled",s).attr("class","a-Button a-Button--noLabel a-Button--withIcon"+(a?" "+a:"")).markup(" type='button'>").markup("<span class='a-Icon ").attr(i).markup("' aria-hidden='true'></span></button>")}(i,r,null,"ui-icon-closethick",y("CODE_EDITOR.CLOSE"),"a-Button--small a-CodeEditor-searchBar-closeButton",!1),i.markup("</div>"),this.element.find(".a-MonacoEditor-toolbar").after(i.toString()),e("#"+r).click((function(){e(this).parent().hide(),o._resize()}))},_queryBuilder:function(){var e=this.options.queryBuilder;e&&e(this,this.getValue())},_codeComplete:function(){if(this.options.codeComplete&&["sql","mle-javascript"].includes(this.options.language)){var e,n,o,i,r,a,s=this,l=s.options.language,d=s._editor,u=d.getModel(),c=d.getPosition(),g=u.getLineContent(c.lineNumber),p=!1,m=s.element[0];if(n=(e=function(e,t){for(;" "==e[t];)t--;t=e.lastIndexOf(" ",t)+1;var n=e.indexOf(" ",t);return-1==n&&(n=e.length),e.substring(t,n)}(g,c.column-1)).split("."),"sql"===l)1==n.length&&[":","&"].includes(e.charAt(0))?(p=!0,o=e.slice(1)):(i=n[n.length-2],r=n[n.length-3]);else if("mle-javascript"===l){if(3!==n.length||"apex"!==n[0]||"env"!==n[1])return void d.trigger("","editor.action.triggerSuggest",{});p=!0,o=n[2],i=void 0,r=void 0}t.delayLinger.start("autocompleteSpinner",(function(){a=t.showSpinner(m)})),s.options.codeComplete({type:p?"item":"",search:p?o:n[n.length-1],parent:i,grantParent:r},(function(e){apex.util.delayLinger.finish("autocompleteSpinner",(function(){a&&(a.remove(),a=null)}));for(var t,n,o=monaco.languages.CompletionItemKind,i={template:o.File,application_item:o.File,page_item:o.File,package:o.File,procedure:o.Method,function:o.Function,constant:o.File,variable:o.File,type:o.File,table:o.File,view:o.File,keyword:o.File,sequence:o.File},r=[],l=0;l<e.length;l++){t=e[l];for(var c=0;c<t.completions.length;c++){var g=(n=t.completions[c]).r||n;r.push({label:n.d||n,insertText:g,detail:t.title,kind:i[t.type]})}}var p=!1;s._addEditorSpecificDisposable("ajax-suggestions",monaco.languages.registerCompletionItemProvider(u._languageIdentifier.language,{provideCompletionItems:function(){return s.element.hasClass("is-active")&&!p?(p=!0,{suggestions:r}):{}}})),d.trigger("","editor.action.triggerSuggest",{})}))}},_validateCode:function(){if(this.options.validateCode){var o=this;o.options.validateCode(o.getValue(),(function(i){i=e.extend({},{errors:[],warnings:[]},i),o._setOption("errors",i.errors),o._setOption("warnings",i.warnings),0==i.errors.length&&0==i.warnings.length&&o.showSuccessNotification(t.escapeHTML(n.getMessage("CODE_EDITOR.VALIDATION_SUCCESS")))}))}},_createContext:function(){return r.createContext("codeEditor",this.element[0])},_populateContext:function(){var t=this,n=t.options,o=n.language,i=t._editor,r=t._context;var a,s,l,d=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?monaco.KeyMod.WinCtrl:monaco.KeyMod.CtrlCmd;function u(){var n=t.element[0];t._trigger("preferencesChanged",e.Event("click",{target:n}))}function c(){i.getModel().updateOptions({insertSpaces:n.tabsInsertSpaces,tabSize:n.tabSize,indentSize:n.indentSize})}t._contextKeys.isSql=i.createContextKey("isSql","sql"===o),t._contextKeys.dbHint=i.createContextKey("dbHint",["sql","mle-javascript"].includes(o)),r.add([{name:"undo",action:function(e,n){i.trigger(null,"undo"),t.focus()}},{name:"redo",action:function(e,n){i.trigger(null,"redo"),t.focus()}},{name:"find",action:function(e,t){i.getAction(n.readOnly?"actions.find":"editor.action.startFindReplaceAction").run()}},{name:"theme",get:function(){return n.theme},set:function(e){n.theme=e,monaco.editor.setTheme(_(e)),u()},choices:p},{name:"tabs-insert-spaces",labelKey:"CODE_EDITOR.INDENT_WITH_TABS",get:function(){return n.tabsInsertSpaces},set:function(e){n.tabsInsertSpaces=e,c(),u()}},{name:"tab-size",get:function(){return n.tabSize},set:function(e){n.tabSize=e,c(),u()},choices:["2","3","4","8"].map(e=>({label:e,value:e}))},{name:"indent-size",get:function(){return n.indentSize},set:function(e){n.indentSize=e,c(),u()},choices:["2","3","4","8"].map(e=>({label:e,value:e}))},{name:"show-ruler",labelKey:"CODE_EDITOR.SHOW_RULER",get:function(){return n.ruler},set:function(e){i.updateOptions({rulers:e?[80]:[]}),n.ruler=e,u()}}]),n.queryBuilder&&r.add({name:"query-builder",hide:"sql"!=o,action:function(e,n){t._queryBuilder()}}),n.codeComplete&&(r.add({name:"code-complete",hide:!["sql","mle-javascript"].includes(o),action:function(e,n){t._codeComplete()}}),i.addAction({id:"apex-code-complete",label:y("CODE_EDITOR.HINT"),keybindings:[d|monaco.KeyCode.Space],precondition:"dbHint",run:function(e){t._codeComplete()}})),n.validateCode&&(r.add({name:"validate",hide:"sql"!=o,action:function(e,n){t._validateCode()}}),i.addAction({id:"apex-code-validate",label:y("CODE_EDITOR.VALIDATE"),keybindings:[d|monaco.KeyMod.Alt|monaco.KeyCode.KEY_V],precondition:"isSql",run:function(e){t._validateCode()}})),a=i.getModel().getAlternativeVersionId(),s=a,l=a,i.onDidChangeModelContent(e=>{var t=i.getModel().getAlternativeVersionId();t<s?(r.enable("redo"),t===a&&r.disable("undo")):(t<=l?t==l&&r.disable("redo"):(r.disable("redo"),s>l&&(l=s)),r.enable("undo")),s=t}),r.disable("undo"),r.disable("redo")},_initToolbar:function(e){var t,n=this.options,o={actionsContext:this._context,simple:!0,data:[]},i=[];i.push({type:"BUTTON",titleKey:"CODE_EDITOR.UNDO",labelKey:"CODE_EDITOR.UNDO",iconOnly:!0,icon:"icon-undo",action:"undo"}),i.push({type:"BUTTON",titleKey:"CODE_EDITOR.REDO",labelKey:"CODE_EDITOR.REDO",iconOnly:!0,icon:"icon-redo",action:"redo"}),o.data.push({id:"undoControls",align:"start",groupTogether:!0,controls:i});var r=[];if(r.push({type:"BUTTON",titleKey:"CODE_EDITOR.FIND",labelKey:"CODE_EDITOR.FIND",iconOnly:!0,icon:"icon-cm-find",action:"find"}),o.data.push({id:"searchControls",align:"start",groupTogether:!0,controls:r}),n.queryBuilder||n.codeComplete||n.validateCode){var a={id:"helperControls",align:"start",groupTogether:!0,controls:[]};n.queryBuilder&&a.controls.push({type:"BUTTON",titleKey:"CODE_EDITOR.QUERY_BUILDER",labelKey:"CODE_EDITOR.QUERY_BUILDER",iconOnly:!0,icon:"icon-cm-query-builder",action:"query-builder"}),n.codeComplete&&(t=y("CODE_EDITOR.HINT")+" - Ctrl+Space",a.controls.push({type:"BUTTON",title:t,label:t,iconOnly:!0,icon:"icon-cm-autocomplete",action:"code-complete"})),n.validateCode&&(t=y("CODE_EDITOR.VALIDATE")+" - Ctrl+Alt+V",a.controls.push({type:"BUTTON",title:t,label:t,iconOnly:!0,icon:"icon-cm-validate",action:"validate"})),o.data.push(a)}o.data.push({id:"menuControls",align:"end",groupTogether:!1,controls:[{type:"MENU",titleKey:"CODE_EDITOR.SETTINGS",labelKey:"CODE_EDITOR.SETTINGS",iconOnly:!0,icon:"icon-gear",menu:{items:[{type:"subMenu",labelKey:"CODE_EDITOR.INDENTATION",menu:{items:[{type:"toggle",action:"tabs-insert-spaces"},{type:"subMenu",labelKey:"CODE_EDITOR.TAB_SIZE",menu:{items:[{type:"radioGroup",action:"tab-size"}]}},{type:"subMenu",labelKey:"CODE_EDITOR.INDENT_SIZE",menu:{items:[{type:"radioGroup",action:"indent-size"}]}}]}},{type:"subMenu",labelKey:"CODE_EDITOR.THEMES",menu:{items:[{type:"radioGroup",action:"theme"}]}},{type:"toggle",action:"show-ruler"}]}}]}),e.toolbar(o)},_setLanguage:function(e){var t=this._editor,n=this.options,o=this._context;function i(e){o.lookup(e)&&o.hide(e)}function r(e){o.lookup(e)&&o.show(e)}monaco.editor.setModelMarkers(t.getModel(),"lineMessages",[]),this.resetNotification(),this._configureCustomSuggestionProvider(),["sql","mle-javascript"].includes(e)?(r("code-complete"),this._contextKeys.dbHint.set("dbHint",!0)):(i("code-complete"),this._contextKeys.dbHint.set("dbHint",!1)),"sql"==e?(r("validate"),r("query-builder")):(i("validate"),i("query-builder")),this._contextKeys.isSql.set("sql"===e),["javascript","mle-javascript"].includes(e)&&b(e,n.javascriptOptions),monaco.editor.setModelLanguage(t.getModel(),e.replace("mle-",""))}}),e.apex.codeEditor.preferencesObjectFromString=function(t){var n,o={};try{n=JSON.parse(t)}catch(e){return i.warn("Code Editor: could not parse optionsString"),{}}return e.each(g,(function(e,t){var r=n[t],a=t;if("theme"===a){if(-1==p.map(e=>e.value).indexOf(r))return void i.warn("Code Editor: Bad theme ignored: "+r)}else if("indentSize"===a||"tabSize"===a){if(-1==["2","3","4","8"].indexOf(r))return void i.warn("Code Editor: Bad number ignored: "+r)}else{if("tabsInsertSpaces"!==a&&"ruler"!==a)return void i.warn("Code Editor: Unknown preference: "+a);r=1==r}o[a]=r})),o}}(apex.jQuery,apex.util,apex.lang,apex.locale,apex.debug,apex.actions,apex.server);
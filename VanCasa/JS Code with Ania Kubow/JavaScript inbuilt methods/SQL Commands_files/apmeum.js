window.apmeum=window.apmeum||{};"undefined"==typeof console&&(console={});"undefined"==typeof console.log&&(console.log=function(){});
"undefined"===typeof apmeum.KEY_RESPONSE_HEADER_OPERATION_ID&&(apmeum.KEY_RESPONSE_HEADER_OPERATION_ID="X-ORACLE-APMCS-REQUEST-ID",apmeum.KEY_RESPONSE_HEADER_ECID="X-ORACLE-DMS-ECID",apmeum.KEY_RESPONSE_HEADER_AGENT_TAG="X-ORACLE-APMCS-TAG",apmeum.XHR_OPEN_FAILED=-1,apmeum.util={},apmeum.util.checkIsFunction=function(c){return c&&"[object Function]"===apmeum.toString.apply(c)},apmeum.util.getBooleanValue=function(c){if("boolean"!==typeof c){if(""==""+c||"0"==""+c)return!1;if("1"==""+c||"TRUE"==(""+
c).toUpperCase())return!0;if("FALSE"==(""+c).toUpperCase())return!1}else return c},apmeum.util.getCookie=function(c){if(!document.location.protocol||"http:"!=document.location.protocol&&"https:"!=document.location.protocol&&"file:"!=document.location.protocol)return"";try{var d=document.cookie.indexOf(c+"\x3d");if(-1!=d){var d=d+c.length+1,a=document.cookie.indexOf(";",d);-1==a&&(a=document.cookie.length);return decodeURIComponent(document.cookie.substring(d,a))}}catch(b){apmeum.debug&&console.log("apmeum.js: Unable to get cookie due to exception: "+
b)}return""},apmeum.util.cleanUpStr=function(c){return!c?"":c.replace(/[ \r\n\t\f\v][ \r\n\t\f\v]*/g," ").replace(/^(.{80})(..*)/g,"$1...")},apmeum.util.getElementTreeXPath=function(c){var d=[];if(c&&9==c.nodeType)return"/";for(;c&&(2==c.nodeType||3==c.nodeType);)c=c.parentNode;for(;c&&1==c.nodeType;c=c.parentNode){for(var a=0,b=c.previousSibling;b;b=b.previousSibling)b.nodeType!=Node.DOCUMENT_TYPE_NODE&&b.nodeName==c.nodeName&&++a;b=c.nodeName.toLowerCase();d.splice(0,0,b+(a?"["+(a+1)+"]":""))}return d.length?
"/"+d.join("/"):""},apmeum.util.getElementXPath=function(c){return c&&c.id?'//*[@id\x3d"'+c.id+'"]':apmeum.util.getElementTreeXPath(c)},apmeum.util.getElmText=function(c){var d=window.apmeum;c=d.util.checkIsFunction(d.getElmLabel)?d.getElmLabel(c):d.getAllowTrackScreenText()?c.hasAttribute("aria-label")?c.getAttribute("aria-label"):c.title?c.title:d.util.checkIsFunction(c.text)?c.text():c.innerText?c.innerText:c.textContent?c.textContent:""+d.util.getElementXPath(c):"";return d.util.cleanUpStr(c)},
apmeum.util.getUrlInfo=function(c){var d=(""+window.location).split("#",1)[0],a=""+d.split("?",1).join("?").split("/",3).join("/"),d=d.substring(a.length).split("?",1).join("?"),a={host:a,path:d};apmeum.rewriteURL(c,a);c={sba:a.host,rp:a.path};window.location.search&&(c.qp=apmeum.rewriteQueryParams(window.location.search));window.location.hash&&(a=window.location.hash,150>a.length&&(c.hp=a));return c},apmeum.util.parseUrl=function(c){var d="",a="";c&&c.length&&(d=""+c.split("?",1).join("?").split("/",
3).join("/"),a=c.substring(d.length));return{host:d,path:a}},apmeum.getBrowserType=function(){return window.chrome&&window.chrome.webstore?"chrome":"undefined"!==typeof InstallTrigger?"firefox":document.documentMode?"ie":window.opr&&opr.addons||window.opera||0<=navigator.userAgent.indexOf(" OPR/")?"opera":0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?"safari":window.StyleMedia?"edge":"unknown"},apmeum.getAllowTrackScreenText=function(){return apmeum.hasOwnProperty("trackScreenText")?
apmeum.util.getBooleanValue(apmeum.trackScreenText):!0},apmeum.applyRewriteRules=function(c,d,a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(!b||!c||""==c)return c;b.rewriteRules instanceof Array||(b.rewriteRules=[{pattern:'(([^\x3c\x3e()\\[\\]\\\\.,;:\\s@"]+(\\.[^\x3c\x3e()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',replacement:"*"},{pattern:"([a-fA-F\\.,_\\:-]*[0-9]+){2,}[a-fA-F_\\:-]*([/\\.])?",
replacement:"*$2"}]);for(var g=b.rewriteRules,e=0;e<g.length;e++)if(!g[e]instanceof Object)console.log("Invalid element in apmeum.rewriteRules at "+e+" position, ignoring rule.");else if(g[e].element||(g[e].element="all"),"path"!=g[e].element&&"host"!=g[e].element&&"all"!=g[e].element)console.log("Invalid element for apmeum.rewriteRules at "+e+" position (element should be either path, host, or all).");else{if(g[e].type){if("page"!=g[e].type&&"ajax"!=g[e].type){console.log("Invalid type for apmeum.rewriteRules at "+
e+" position (type should be either page or ajax).");continue}if(a&&a!=g[e].type)if(b.debug){console.log("Ignoring apmeum.rewriteRules at "+e+" position (because it's irrelevant for "+a+").");continue}else b.debug&&5<b.debug&&console.log("Applying rule ("+e+") on "+a+" urls.")}else b.debug&&5<b.debug&&console.log("Applying rule ("+e+") on both page and ajax urls.");var l="g";"options"in g[e]&&(l=g[e].options,"string"!==typeof l&&(console.log("Ignoring non-string options for apmeum.rewrite rule #"+
e),l="g"));if(!("regex"in g[e]&&g[e].regex instanceof RegExp)){if(!1 in g[e]){console.log("Invalid element in apmeum.rewriteRules at "+e+" position (no pattern).");continue}g[e].regex=RegExp(g[e].pattern,l)}if(!1 in g[e])console.log("Invalid element in apmeum.rewriteRules at "+e+" position (no replacement).");else{var l=g[e].replacement,m=g[e].element;if("all"==m&&"host"!=d||d&&d==m)c=c.replace(g[e].regex,l)}}return c},apmeum.rewriteURL=function(c,d){var a=window.apmeum?window.apmeum:document.apmeum?
document.apmeum:null;if(a)if(!d instanceof Object&&d)console.log("Invalid urlinfo parameter applying rewrite rules for "+c+".");else if(!d.host instanceof String)console.log("Invalid urlinfo['host'] parameter applying rewrite rules for "+c+".");else if(!d.path instanceof String)console.log("Invalid urlinfo['path'] parameter applying rewrite rules for "+c+".");else{d.host=encodeURI(a.applyRewriteRules(decodeURI(d.host),"host",c));var b=d.path.indexOf("?");if(-1==b)d.path=encodeURI(a.applyRewriteRules(decodeURI(d.path),
"path",c));else{var g=d.path.substring(0,b),b=d.path.substring(b);d.path=encodeURI(a.applyRewriteRules(decodeURI(g),"path",c))+a.rewriteQueryParams(b)}d.path instanceof String&&"/"!==d.path.charAt(0)&&(d.path="/"+d.path)}},apmeum.rewriteQueryParams=function(c){var d="";"?"===c.charAt(0)&&(d="?",c=c.substr(1));for(var a=0;a<c.length;){var b=c.indexOf("\x3d",a);if(-1==b){d+=c.substring(a,c.length);break}b++;d+=c.substring(a,b);a=b;b=c.indexOf("\x26",a);-1==b&&(b=c.length);d+=encodeURIComponent(apmeum.applyRewriteRules(decodeURIComponent(c.substring(a,
b))));a=b}return d},apmeum.needMonitor=function(c){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d){var a=d.getBrowserType(),b=d.obs;a&&(d.hasOwnProperty("typeobs")&&d.typeobs.hasOwnProperty(a))&&(b=d.typeobs[a]);return"undefined"!=typeof b&&0==(b&c)?!1:!0}},apmeum.opt=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var d=[],a=[],b=[],g=[],e,l=2048-(c.baseCollectorUrl?c.baseCollectorUrl.length:0),m=0,h="",u=function(){var c=window.apmeum?
window.apmeum:document.apmeum?document.apmeum:null;if(c&&0!=a.length){for(var h=q("call"),b=h.extraParams,y=s(a[0]),b=b+y,d,g=0,f=0;f<a.length&&10>f&&s(a[f])==y;f++)if(a[f].hasOwnProperty("apmeum_startTime")){a[f].hasOwnProperty("apmeum_endTime")||(a[f].apmeum_endTime=c.time());a[f].hasOwnProperty("apmeum_respTime")||(a[f].apmeum_respTime=a[f].apmeum_endTime);a[f].apmeum_endTime<a[f].apmeum_respTime&&(a[f].apmeum_endTime=a[f].apmeum_respTime);a[f].hasOwnProperty("apmeum_respLength")||(a[f].apmeum_respLength=
0);a[f].hasOwnProperty("apmeum_method")||(a[f].apmeum_method="GET");d="\x26ct"+f+"\x3d"+encodeURIComponent(a[f].apmeum_url)+"\x26csm"+f+"\x3d"+encodeURIComponent(a[f].apmeum_syncMode)+"\x26csl"+f+"\x3d"+encodeURIComponent(a[f].apmeum_sentLength)+"\x26crl"+f+"\x3d"+encodeURIComponent(a[f].apmeum_respLength)+"\x26cs"+f+"\x3d"+encodeURIComponent(a[f].apmeum_startTime)+"\x26cr"+f+"\x3d"+encodeURIComponent(a[f].apmeum_respTime)+"\x26ce"+f+"\x3d"+encodeURIComponent(a[f].apmeum_endTime)+"\x26cm"+f+"\x3d"+
encodeURIComponent(a[f].apmeum_method);if(a[f].apmeum_active_pgupd)d+="\x26cpu"+f+"\x3d"+encodeURIComponent(a[f].apmeum_active_pgupd.startTime);else if("complete"!=document.readyState){navstart=0;try{navstart=window.performance.timing.navigationStart}catch(e){navstart=0}0<navstart&&(d+="\x26cpu"+f+"\x3d"+navstart)}a[f].apmeum_user&&(d+="\x26cu"+f+"\x3d"+encodeURIComponent(a[f].apmeum_user));a[f].apmeum_statuscode&&(100<a[f].apmeum_statuscode&&600>a[f].apmeum_statuscode)&&(d+="\x26crs"+f+"\x3d"+encodeURIComponent(a[f].apmeum_statuscode));
a[f].apmeum_status&&(d+="\x26cst"+f+"\x3d"+encodeURIComponent(a[f].apmeum_status));a[f].apmeum_operationId&&(d+="\x26oi"+f+"\x3d"+encodeURIComponent((""+a[f].apmeum_operationId).substring(0,40)));a[f].apmeum_ecid&&(d+="\x26ecid"+f+"\x3d"+encodeURIComponent(a[f].apmeum_ecid));a[f].apmeum_webappTag&&(d+="\x26tg"+f+"\x3d"+encodeURIComponent(a[f].apmeum_webappTag));if(l<d.length+r(h)+g.toString().length+22&&0!=f)break;b+=d;h.extraParams=b;g+=1}b+="\x26sz\x3d"+encodeURIComponent(g);a.splice(0,g);h.extraParams=
b;c.invokeRequest(h);0<a.length&&u()}},t=function(){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a&&0!=b.length){for(var c=q("error"),h=c.extraParams,d=s(b[0]),h=h+d,g,e=0,f=0;f<b.length&&10>f&&s(b[f])==d;f++){g="\x26em"+f+"\x3d"+encodeURIComponent(b[f].message)+"\x26sf"+f+"\x3d"+encodeURIComponent(b[f].file)+"\x26ln"+f+"\x3d"+encodeURIComponent(b[f].line)+"\x26lc"+f+"\x3d"+encodeURIComponent(b[f].col)+"\x26es"+f+"\x3d"+encodeURIComponent(JSON.stringify(b[f].err))+"\x26fs"+
f+"\x3d"+encodeURIComponent(b[f].startTime)+"\x26ec"+f+"\x3d"+encodeURIComponent(b[f].count)+"\x26el"+f+"\x3d"+encodeURIComponent(b[f].lastime);if(l<g.length+r(c)+e.toString().length+22&&0!=f)break;h+=g;c.extraParams=h;e+=1}h+="\x26sz\x3d"+encodeURIComponent(e);b.splice(0,e);c.extraParams=h;a.invokeRequest(c);0<b.length&&t()}},w=function(){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a&&0!=d.length){for(var c=q("event"),h=c.extraParams,b,g=0,e=0;e<d.length&&10>e;e++){b=
"\x26ec"+e+"\x3d"+encodeURIComponent(d[e].category)+"\x26ev"+e+"\x3d"+encodeURIComponent(d[e].value)+"\x26es"+e+"\x3d"+encodeURIComponent(d[e].start)+"\x26ee"+e+"\x3d"+encodeURIComponent(d[e].end);d[e].label&&(b+="\x26el"+e+"\x3d"+encodeURIComponent(d[e].label));if(l<b.length+r(c)+g.toString().length+22&&0!=e)break;h+=b;c.extraParams=h;g+=1}h+="\x26sz\x3d"+encodeURIComponent(g);d.splice(0,g);c.extraParams=h;a.invokeRequest(c);0<d.length&&w()}},v=function(){var a=window.apmeum?window.apmeum:document.apmeum?
document.apmeum:null;if(a&&0!=g.length){for(var c=q("pgupd"),h=c.extraParams,b=s(g[0]),h=h+b,d,e=0,f=0;f<g.length&&10>f&&s(g[f])==b;f++){d="\x26xp"+f+"\x3d"+encodeURIComponent(g[f].pgupd_id)+"\x26pn"+f+"\x3d"+encodeURIComponent(a.applyRewriteRules(g[f].pgupd_name))+"\x26vi"+f+"\x3d"+encodeURIComponent(g[f].vis_impact)+"\x26st"+f+"\x3d"+encodeURIComponent(g[f].state)+"\x26as"+f+"\x3d"+encodeURIComponent(g[f].startTime)+"\x26fs"+f+"\x3d"+encodeURIComponent(g[f].fetchStart)+"\x26fb"+f+"\x3d"+encodeURIComponent(g[f].firstByte)+
"\x26cc"+f+"\x3d"+encodeURIComponent(g[f].ajaxcnt)+"\x26je"+f+"\x3d"+encodeURIComponent(g[f].jserrcnt)+"\x26ae"+f+"\x3d"+encodeURIComponent(g[f].endTime);if(l<d.length+r(c)+e.toString().length+22&&0!=f)break;h+=d;c.extraParams=h;e+=1}h+="\x26sz\x3d"+encodeURIComponent(e);g.splice(0,e);c.extraParams=h;a.invokeRequest(c);0<g.length&&v()}},B=0,q=function(a){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var h="",b="",h="v\x3d1\x26t\x3d"+a;c.customerId?b+="\x26X-USER-IDENTITY-DOMAIN-NAME\x3d"+
encodeURIComponent(c.customerId):console.log("Oracle APM Browser agent cannot send data to cloud without valid apmeum.customerId. Please verify your configuration");a=c.util.getUrlInfo("page");b+="\x26sba\x3d"+encodeURIComponent(a.sba);b+="\x26rp\x3d"+encodeURIComponent(a.rp);a.qp&&(b+="\x26qp\x3d"+encodeURIComponent(a.qp));a.hp&&(b+="\x26hp\x3d"+encodeURIComponent(a.hp));c.operationId&&(b+="\x26oi\x3d"+encodeURIComponent((""+c.operationId).substring(0,40)));c.ecid&&(b+="\x26ecid\x3d"+encodeURIComponent(c.ecid));
c.webapp_tag&&(b+="\x26tg\x3d"+encodeURIComponent(c.webapp_tag));c.agentId&&(b+="\x26sak\x3d"+encodeURIComponent(c.agentId));c.agentVersionKey&&(b+="\x26sav\x3d"+encodeURIComponent(c.agentVersionKey));c.sid&&(b+="\x26sid\x3d"+encodeURIComponent(c.sid));c.pos2&&(b+="\x26pos2\x3d"+encodeURIComponent(c.pos2));c.pos&&(b+="\x26pos\x3d"+encodeURIComponent(c.pos));c.atk&&(b+="\x26atk\x3d"+encodeURIComponent(c.atk));c.username&&(b+="\x26un\x3d"+encodeURIComponent(c.username));a=c.util.getCookie("oracle_apm_syndye");
c=c.util.getCookie("oracle_apm_testguid");a?b+="\x26sd\x3d"+encodeURIComponent(a):c&&(b+="\x26sd\x3d"+encodeURIComponent(c));return{typeParams:h,commonParams:b,extraParams:""}}},s=function(a){var h;h="\x26dt\x3d"+encodeURIComponent(c.applyRewriteRules(a.dt));h+="\x26a1\x3d"+encodeURIComponent(c.applyRewriteRules(a.a1));h+="\x26a2\x3d"+encodeURIComponent(c.applyRewriteRules(a.a2));return h+="\x26a3\x3d"+encodeURIComponent(c.applyRewriteRules(a.a3))},r=function(a){var c=0;a&&(c=a.typeParams.length+
a.commonParams.length+a.extraParams.length);return c},n=function(a){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){u();t();w();v();var h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(h)if(void 0===window.performance||!h.util.checkIsFunction(window.performance.getEntriesByType))h.debug&&4<h.debug&&console.log("apmeum.js: performance.getEntriesByType() is not supported by this browser ignoring performance metrics.");else{var b=0,d=0,g=0,f=0,l=0,m=
0,p=window.performance.getEntriesByType("resource");if(!(void 0===p||0==p.length)){for(var n=B;n<p.length;n++)if(-1==p[n].name.split("?",1).join("?").indexOf("/APMaaSCollector/")){var s=p[n].domainLookupEnd-p[n].domainLookupStart,r=p[n].redirectEnd-p[n].redirectStart,z=p[n].connectEnd-p[n].connectStart;0<s&&(b+=s,l++);if(0<r||0<z)m++,0<r&&(d+=r),0<z&&(g+=z,0<p[n].secureConnectionStart&&(f=p[n].connectEnd>p[n].secureConnectionStart?f+(p[n].connectEnd-p[n].secureConnectionStart):f+(p[n].secureConnectionStart-
p[n].connectEnd)))}"function"==typeof performance.clearResourceTimings?performance.clearResourceTimings():B=p.length;b=Math.round(b);d=Math.round(d);g=Math.round(g);f=Math.round(f);0==b&&0==d&&0==g&&0==f?h.debug&&4<h.debug&&console.log("apmeum.js: No relevant timings, not sending perf info"):(p=q("perf"),p.extraParams+="\x26td\x3d"+encodeURIComponent(b)+"\x26tr\x3d"+encodeURIComponent(d)+"\x26tc\x3d"+encodeURIComponent(g)+"\x26ts\x3d"+encodeURIComponent(f)+"\x26tdn\x3d"+encodeURIComponent(l)+"\x26tcn\x3d"+
encodeURIComponent(m),h.invokeRequest(p))}}h=!1;c.combinedPost&&(c.combinedPost.messageArray&&0<c.combinedPost.messageArray.length)&&(h=!c.combinedPost.send(a));e=null;!0==h&&k()}},k=function(){e||(e=setTimeout(n,2E3))};return{collectPage:function(){if(c.needMonitor(1)){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){var h;h=null;if(window.performance&&window.performance.timing){h={};var b=window.performance.timing;h.navigationStart=b.navigationStart;h.responseStart=b.responseStart;
h.domInteractive=b.domInteractive;h.domReady=b.domContentLoadedEventEnd;h.pageReady=b.loadEventEnd}else if(h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null){var b={},d;if(d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null){var g=d.util.getCookie("apmeum-navigationStart"),e=Number(d.util.getCookie("apmeum-pd")),f=Number(d.util.getCookie("apmeum-pr"));d=e&&e==document.referrer.hashCode()||3E4>d.time()-Number(g)&&(e==document.URL.hashCode()&&f==document.referrer.hashCode()||
document.referrer&&document.URL.hashCode()==f)?g:0}else d=void 0;b.navigationStart=d?Number(d):0;b.responseStart=h.responseStart?h.responseStart:0;b.domInteractive=0;b.domReady=h.domReady?h.domReady:0;b.pageReady=h.time();0==b.navigationStart&&(b.pageReady-=b.responseStart,b.domReady-=b.responseStart,b.responseStart=0);h=b}else h=void 0;if((b=a.util.getCookie("apmCorrPage"))&&0<b.length)corrCookieFld=b.split("|"),2<corrCookieFld.length&&(a.operationId||(a.operationId=corrCookieFld[0]),a.agentId||
(a.agentId=corrCookieFld[1]),a.agentVersionKey||(a.agentVersionKey=corrCookieFld[2]));b=q("pageview");d=b.extraParams;d+="\x26ns\x3d"+encodeURIComponent(h.navigationStart)+"\x26rs\x3d"+encodeURIComponent(h.responseStart)+"\x26di\x3d"+encodeURIComponent(h.domInteractive)+"\x26dr\x3d"+encodeURIComponent(h.domReady)+"\x26pr\x3d"+encodeURIComponent(h.pageReady);d+="\x26sw\x3d"+encodeURIComponent(screen.width)+"\x26sh\x3d"+encodeURIComponent(screen.height)+"\x26spd\x3d"+encodeURIComponent(screen.colorDepth);
window.outerHeight&&(d+="\x26ww\x3d"+encodeURIComponent(outerWidth||document.documentElement.clientWidth||document.body.clientWidth)+"\x26wh\x3d"+encodeURIComponent(outerHeight||document.documentElement.clientHeight||document.body.clientHeight)+"\x26dw\x3d"+encodeURIComponent(innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+"\x26dh\x3d"+encodeURIComponent(innerHeight||document.documentElement.clientHeight||document.body.clientHeight));d+="\x26de\x3d"+encodeURIComponent(document.charset?
document.charset:document.characterSet);d+="\x26dt\x3d"+encodeURIComponent(a.applyRewriteRules(a.eventAttributes.getPageName()));d+="\x26a1\x3d"+encodeURIComponent(a.applyRewriteRules(a.eventAttributes.getAttr1()));d+="\x26a2\x3d"+encodeURIComponent(a.applyRewriteRules(a.eventAttributes.getAttr2()));d+="\x26a3\x3d"+encodeURIComponent(a.applyRewriteRules(a.eventAttributes.getAttr3()));a.statusCode&&(d+="\x26sc\x3d"+encodeURIComponent(a.statusCode));h=a.util.parseUrl(document.referrer);a.rewriteURL("page",
h);d+="\x26drf\x3d"+encodeURIComponent(h.host+h.path);b.extraParams=d;b.needReGetPageName=!0;a.invokeRequest(b)}k()}},collectCalls:function(h){c.needMonitor(2)&&(a[a.length]=h,k())},collectErrors:function(a,c,d,g,e,t){var f=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(f&&f.needMonitor(4)){var u="",v="",n="",l="";f.eventAttributes&&(f.util.checkIsFunction(f.eventAttributes.getPageName)&&(u=f.eventAttributes.getPageName()),f.util.checkIsFunction(f.eventAttributes.getAttr1)&&(v=
f.eventAttributes.getAttr1()),f.util.checkIsFunction(f.eventAttributes.getAttr2)&&(n=f.eventAttributes.getAttr2()),f.util.checkIsFunction(f.eventAttributes.getAttr3)&&(l=f.eventAttributes.getAttr3()));var q="";f.spa.active_pgupd&&(q=f.spa.active_pgupd.pgupd_id,f.spa.active_pgupd.errcnt++);if(0<b.length&&2E3>t-m&&q==h){f=b.length-1;if(a===b[f].message&&c===b[f].file&&g===b[f].col&&e===b[f].err&&u===b[f].dt&&v===b[f].a1&&n===b[f].a2&&l===b[f].a3){b[f].count++;b[f].lastime=t;return}m=t;h=q}b[b.length]=
{lastime:t,count:1,message:a,file:c,line:d,col:g,err:e,startTime:t,dt:u,a1:v,a2:n,a3:l};k()}},spa:{trackHistoryChange:function(a,c){var h=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(h&&h.needMonitor(16)){if(h.spa.active_pgupd){var b=h.util.getUrlInfo("page");h.option.spa.updatePgUpd(b)}else h.option.spa.startPgUpd(h.time(),a,c);h.spa.active_pgupd.vis_impact=h.spa.util.FULL_UPDATE}},startPgUpd:function(a,c,h){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:
null;if(b&&b.needMonitor(16)){b.spa.active_pgupd&&(b.spa.active_pgupd.noRunningAjaxs()||(b.spa.active_pgupd.state="aborted"),b.option.spa.endPgUpd(a));var d=b.util.getUrlInfo("page");b.spa.active_pgupd={startTime:a,endTime:0,pgupd_id:c,pgupd_name:h,vis_impact:b.spa.util.PARTIAL_UPDATE,state:"success",sba:d.sba,rp:d.rp,jserrcnt:0,ajaxcnt:0,ajax_amount_1second:0,ajax_amount_test:0,ajax_timeout_amount:0,ajax_abort_amount:0,ajax_error_amount:0,fetchStart:0,firstByte:0,hasFetchStart:function(){return 0!=
this.fetchStart?!0:!1},hasFirstByte:function(){return 0!=this.firstByte?!0:!1},isLastAjax:function(){return 0==this.ajax_amount_1second},noRunningAjaxs:function(){return 0==this.ajax_amount_1second},isStartedWithinOneSecond:function(a){return a-b.spa.active_pgupd.startTime<b.spa.util.ONE_SECOND},shouldWait:function(a){return a-b.spa.active_pgupd.endTime<b.spa.util.PGUPD_WAIT_TIME}};d.qp&&(b.spa.active_pgupd.qp=d.qp);d.hp&&(b.spa.active_pgupd.hp=d.hp);b.spa.active_pgupd.timer=setInterval(function(){b?
b.spa.active_pgupd?(0>b.spa.active_pgupd.ajax_amount_1second&&console.log("apmeum.js: apmeum.spa.active_pgupd.ajax_amount_1second should not be less than 0!!! ERROR"),b.debug&&4<b.debug&&console.log("apmeum.js: THE CURRENT PAGE UPDATE IS NOT SENT YET!!!!!!!   Amount of Running Ajax : "+b.spa.active_pgupd.ajax_amount_1second+" Amount of Ajax Fired : "+b.spa.active_pgupd.ajax_amount_test),0==b.spa.active_pgupd.ajax_amount_1second&&!b.spa.active_pgupd.shouldWait(b.time())&&b.option.spa.endPgUpd(0)):
b.debug&&4<b.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated inside timer function. This is very odd."):console.log("apmeum.js: expecting window.apmeum to be initialized in timer function. This is very odd.")},b.spa.util.PGUPD_POLL_INTERVAL)}},updatePgUpd:function(a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){b.spa.active_pgupd||b.debug&&4<b.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated when updatePgUpd is called. This is very odd.");
for(var c in a)b.spa.active_pgupd[c]=a[c]}},endPgUpd:function(a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){b.spa.active_pgupd||b.debug&&4<b.debug&&console.log("apmeum.js: expecting apmeum.spa.active_pgupd to be populated when endPgUpd is called. This is very odd.");b.spa.active_pgupd.timer&&(clearInterval(b.spa.active_pgupd.timer),delete b.spa.active_pgupd.timer);b.spa.active_pgupd.hasFirstByte()||(b.spa.active_pgupd.vis_impact=b.spa.util.NONE_UPDATE);!a||0==a?b.spa.active_pgupd.endTime||
(b.spa.active_pgupd.endTime=b.time()):b.spa.active_pgupd.endTime=a;if("aborted"!=b.spa.active_pgupd.state&&(0!=b.spa.active_pgupd.ajax_abort_amount||0!=b.spa.active_pgupd.ajax_timeout_amount||0!=b.spa.active_pgupd.ajax_error_amount))b.spa.active_pgupd.state="error";b.spa.recordEventAttributes();b.spa.active_pgupd.completeTime=b.spa.active_pgupd.endTime-b.spa.active_pgupd.startTime;b.debug&&4<b.debug&&console.log("apmeum.js: Page update is ready for sending to collector: "+JSON.stringify(b.spa.active_pgupd));
g[g.length]=b.spa.active_pgupd;delete b.spa.active_pgupd;k()}}},collectEvent:function(a,b,h,g,e,t){if(c.needMonitor(8)){if(!a||!b||!h||!g)return"Some required value is empty";d[d.length]={category:a,value:b,start:h,end:g};e&&(d[d.length-1].label=e);k()}},sendAll:n}}},apmeum.option=apmeum.opt(),apmeum.collreachable=0,apmeum.setCollReachable=function(c){this.collreachable=c},apmeum.invokeRequest=function(c){"bridge"==apmeum.transType?apmeum.pushToBridge(c):("beacon"==apmeum.transType||"fetch"==apmeum.transType)&&
!0==apmeum.cmp?apmeum.combinedPost.invoke(c):apmeum.invokeGet(c)},apmeum.pushToBridge=function(c){var d=""+c.typeParams+c.extraParams;c=c.commonParams.split("\x26");for(var a=0;a<c.length;a++){var b=c[a];if(b){var g=b.split("\x3d");if("sba"==g[0]||"rp"==g[0]||"oi"==g[0]||"ecid"==g[0])d+="\x26"+b}}APMBridge.collect(d)},apmeum.invokeGet=function(c){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d)if(c=""+c.typeParams+c.commonParams+c.extraParams,"beacon"==d.transType&&"sendBeacon"in
navigator)navigator.sendBeacon(d.baseCollectorUrl,c+"\x26cts\x3d"+encodeURIComponent(d.time()));else if(!(1<d.collreachable)&&!(0==c.indexOf("\x26t\x3dpageview\x26")&&0==d.collreachable))if("fetch"==d.transType&&window.fetch)d.debug&&5<d.debug&&console.log("Sending data via fetch to collector: "+c),fetch(d.baseCollectorUrl+c+"\x26cts\x3d"+encodeURIComponent(d.time()),{method:"get",credentials:"include",mode:"cors"}).then(function(a){(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)&&
a.setCollReachable(1)})["catch"](function(a){(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)&&a.setCollReachable(2)});else{var a=d.pool.getConnection();d.debug&&5<d.debug&&console.log("Sending data via image to collector: "+c);a?(a.onload=function(){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;b&&(0<a.naturalWidth?b.setCollReachable(1):b.setCollReachable(2))},a.src=d.baseCollectorUrl+c+"\x26cts\x3d"+encodeURIComponent(d.time())):d.debug&&console.log("apmeum.js: Unable to get image from connection pool")}},
apmeum.time=function(){return(new Date).getTime()},apmeum.combinedPost={},apmeum.combinedPost.messageArray=[],apmeum.combinedPost.invoke=function(c){this.messageArray.push(c)},apmeum.combinedPost.reGetPageName=function(){for(var c=function(a){var c=null;a=b.extraParams;var h=a.indexOf("\x26dt\x3d");0<=h&&(c=a.indexOf("\x26",h+4),c=0>c?a.length:c,c=a.substring(h+4,c));return c},d=function(a,c){c||(c="");var h=b.extraParams,d=h.indexOf("\x26dt\x3d");if(0<=d){var g=h.indexOf("\x26",d+4),g=0>g?h.length:
g,h=h.substring(0,d+4)+c+h.substring(g,h.length);b.extraParams=h}},a=0;a<this.messageArray.length;a++){var b=this.messageArray[a];if(!0==b.needReGetPageName){var g=c(b),e=apmeum.eventAttributes.reGetPageName(),e=encodeURIComponent(e);if(!e){b.retryCount=b.retryCount?b.retryCount+1:1;if(b.retryCount>apmeum.forceGetPageTitleMaxRetryCount){console.log("exceed max retry, terminate retry ");break}apmeum.debug&&5<apmeum.debug&&console.log("Retry count on getting page title : "+b.retryCount);return!1}g!=
e&&(d(b,e),apmeum.debug&&5<apmeum.debug&&console.log("Page tile will be replaced. Old title is : "+g+"; New title is : "+e))}}return!0},apmeum.combinedPost.send=function(c){if("beacon"!=apmeum.transType&&"fetch"!=apmeum.transType||0>=this.messageArray.length)return!0;if(!0==apmeum.forceGetPageTitle&&!1==this.reGetPageName()&&!0!=c)return!1;c=0;var d=this.messageArray[0].commonParams,a=d.split("\x26");c+=d.length;for(var b={},g=0;g<a.length;g++){var e=a[g];e&&(e=e.split("\x3d"),b[e[0]]=e[1])}b.cma=
[];for(a=0;a<this.messageArray.length;)if(g=this.messageArray[a],d==g.commonParams){g=g.typeParams+g.extraParams;c+=g.length;if(10240<c)break;b.cma.push(g);this.messageArray.splice(0,1)}else a++;b.cts=encodeURIComponent(apmeum.time());apmeum.debug&&5<apmeum.debug&&console.log("Sending combinded data to collector: "+JSON.stringify(b));if("beacon"==apmeum.transType&&"sendBeacon"in navigator)return navigator.sendBeacon(apmeum.baseCollectorUrl,JSON.stringify(b)),!0;if(1<apmeum.collreachable)return!0;
if("fetch"==apmeum.transType&&window.fetch)fetch(apmeum.baseCollectorUrl,{method:"POST",credentials:"include",mode:"cors",body:JSON.stringify(b)}).then(function(a){apmeum.setCollReachable(1)})["catch"](function(a){apmeum.setCollReachable(2)});0<this.messageArray.length&&this.send();return!0},apmeum.createConnectionPool=function(c,d){function a(a){return function(){a.src=""}}var b=0,g=[],e=[];return{getConnection:function(){var l=null;b==c&&(b=0);var m=apmeum.time();g[b]||(g[b]=new Image,g[b].onload=
function(){if(window.apmeum?window.apmeum:document.apmeum&&document.apmeum)0<img.naturalWidth?window.apmeum.setCollReachable(1):window.apmeum.setCollReachable(2)},e[b]=0);m-e[b]>=d&&(l=g[b],e[b]=m,b++,setTimeout(a(l),d));return l}}},apmeum.getDefaultTransportType=function(){return"object"===typeof APMBridge&&"function"===typeof APMBridge.collect?"bridge":"sendBeacon"in navigator?"beacon":window.fetch?"fetch":"image"},apmeum.eventAttributes=function(){var c={getPageName:function(){var a=window.apmeum?
window.apmeum:document.apmeum?document.apmeum:null;if(a){if(a.pagename&&0<a.pagename.length)return a.pagename;var b=d("Dt");return b?b:a.getAllowTrackScreenText()?document.title:""}},reGetPageName:function(b){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d){var l=null,m=a();if(!0==b||!d.udfAttributeDt&&!m)l=c.getPageName();return l}},getAttr1:function(){var a=d("1");if(a)return a;a=window.location.pathname;if(!a)return"";var b="/"==a.charAt(0)?a.indexOf("/",1):a.indexOf("/",
0);return 0<b?a.substring("/"==a.charAt(0)?1:0,b):""},getAttr2:function(){return d("2")},getAttr3:function(){return d("3")}},d=function(b){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c){var d="",m="udfAttribute"+b;if("function"===typeof c[m]&&(d=c[m].apply(this)))return d;c=a();b="getAttr"+b;c&&c[b]&&(d=c[b].apply(this));return d?d:""}},a=function(){var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){if(a.frameworkInitialized)return a.frameworkSupport;
a.frameworkSupport=null;window.AdfPage?a.frameworkSupport=b():window.Siebel&&(a.frameworkSupport=null);a.frameworkInitialized=!0;return a.frameworkSupport}},b=function(){return{getAttrDt:function(){var a="";AdfPage&&(AdfPage.PAGE&&AdfPage.PAGE.getViewId)&&(a=AdfPage.PAGE.getViewId());return a},getAttr1:function(){var a="";AdfPage&&(AdfPage.PAGE&&AdfPage.PAGE.getBaseResourceUrl)&&(a=AdfPage.PAGE.getBaseResourceUrl());return a},getAttr2:function(){var a="";if(AdfPage&&AdfPage.PAGE&&AdfPage.PAGE.getActiveComponent){var b=
AdfPage.PAGE.getActiveComponent();b&&(b.getComponentType&&(a+="["+b.getComponentType()+"]"),AdfPage.PAGE.getActiveComponentId&&(a+=AdfPage.PAGE.getActiveComponentId()))}return a}}};return c}(),apmeum.spa={util:{PGUPD_POLL_INTERVAL:2E3,ONE_SECOND:1E3,PGUPD_WAIT_TIME:1E3,FULL_UPDATE:"full",PARTIAL_UPDATE:"partial",NONE_UPDATE:"none"},collectLastPgUpdate:function(){apmeum.spa.active_pgupd&&apmeum.option.spa.endPgUpd(0)},recordEventAttributes:function(){if(apmeum.spa.active_pgupd){var c="",d="",a="",
b="";apmeum.eventAttributes&&(apmeum.util.checkIsFunction(apmeum.eventAttributes.getPageName)&&(c=apmeum.eventAttributes.getPageName()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr1)&&(d=apmeum.eventAttributes.getAttr1()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr2)&&(a=apmeum.eventAttributes.getAttr2()),apmeum.util.checkIsFunction(apmeum.eventAttributes.getAttr3)&&(b=apmeum.eventAttributes.getAttr3()));apmeum.spa.active_pgupd.dt=c;apmeum.spa.active_pgupd.a1=d;apmeum.spa.active_pgupd.a2=
a;apmeum.spa.active_pgupd.a3=b}},capturePgUpdateRelatedAjax:function(c){var d=apmeum.time();if(apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.isStartedWithinOneSecond(d)||!apmeum.spa.active_pgupd.noRunningAjaxs()||apmeum.spa.active_pgupd.noRunningAjaxs()&&apmeum.spa.active_pgupd.shouldWait(d)))c.apmeum_active_pgupd=apmeum.spa.active_pgupd,apmeum.spa.active_pgupd.ajax_amount_1second++,apmeum.spa.active_pgupd.ajax_amount_test++,apmeum.spa.active_pgupd.ajaxcnt++},recordFirstByteForPgUpdate:function(c,
d){apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd==c.apmeum_active_pgupd&&!apmeum.spa.active_pgupd.hasFirstByte())&&(apmeum.spa.active_pgupd.firstByte=c.async?c.apmeum_respTime:d)},dealWithAjaxForPgUpdate:function(c){apmeum.spa.active_pgupd&&apmeum.spa.active_pgupd==c.apmeum_active_pgupd?(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime)):apmeum.debug&&4<apmeum.debug&&console.log("apmeum.js: A ajax call is done but either does not related to any pageupdate(probably background job doing updates) OR belongs to previous pageUpdate")},
recordFetchStartForPgUpdate:function(c){apmeum.spa.active_pgupd&&!apmeum.spa.active_pgupd.hasFetchStart()&&(apmeum.spa.active_pgupd.fetchStart=c)},dealWithTimeout:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_timeout_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime))},dealWithError:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&
c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_error_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=c.apmeum_endTime))},dealWithAbort:function(c){apmeum.spa.hasOwnProperty("active_pgupd")&&c.apmeum_active_pgupd==apmeum.spa.active_pgupd&&(apmeum.spa.active_pgupd.ajax_amount_1second--,apmeum.spa.active_pgupd.ajax_abort_amount++,apmeum.spa.active_pgupd.isLastAjax()&&(apmeum.spa.active_pgupd.endTime=
c.apmeum_endTime))},trackHistory:function(){apmeum.util.addEventCrossBrowser(window,"popstate",function(c){apmeum.option.spa.trackHistoryChange("history-navigation","click back or forward in browser history")});history.replaceState&&(apmeum.orig_history_replaceState=history.replaceState,history.replaceState=function(c,d,a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b)return b.option.spa.trackHistoryChange("replaceState-in-history","javascript triggered update of history"),
b.orig_history_replaceState.apply(this,arguments)});history.go&&(apmeum.orig_history_go=history.go,history.go=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c)return c.option.spa.trackHistoryChange("go-in-history","javascript triggered update of history"),c.orig_history_go.apply(this,arguments)});history.setState&&(apmeum.orig_history_setState=history.setState,history.setState=function(){var c=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(c)return c.option.spa.trackHistoryChange("setState-in-history",
"javascript triggered update of history"),c.orig_history_setState.apply(this,arguments)});history.pushState&&(apmeum.orig_history_pushState=history.pushState,history.pushState=function(c,d,a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b)return b.option.spa.trackHistoryChange("push-to-history","javascript triggered update of history"),b.orig_history_pushState.apply(this,arguments)})},trackPgUpdate:function(){apmeum.util.addEventCrossBrowser(window,"mouseup",function(c){var d=
(new Date).getTime(),a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){var b,g;c.srcElement?(b=a.util.getElementXPath(c.srcElement),g=a.util.getElmText(c.srcElement)):c.target&&(b=a.util.getElementXPath(c.target),g=a.util.getElmText(c.target));a.option.spa.startPgUpd(d,b,g)}});apmeum.util.addEventCrossBrowser(document.body,"keydown",function(c){var d=(new Date).getTime(),a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a&&void 0!=c.target){var b=a.util.getElementXPath(c.target),
g=a.util.getElmText(c.target);if(!(c.hasOwnProperty("isTrusted")&&!1==c.isTrusted)&&"iframe"!=document.activeElement.tagName.toLowerCase()){var e=c.target.tagName.toLowerCase();if("textarea"!=e){if("input"==e&&(e=c.type,"button"!=e&&"checkbox"!=e&&"image"!=e&&"radio"!=e&&"reset"!=e&&"submit"!=e))return;e="";c.hasOwnProperty("key")?e=c.key:c.hasOwnProperty("keyCode")?e=String.fromCharCode(c.keyCode):c.hasOwnProperty("which")&&(e=String.fromCharCode(c.which));void 0!=e&&""!=e&&(b+="_"+e,g+="_"+e,a.shortcut=
e);a.option.spa.startPgUpd(d,b,g)}}}})}},apmeum.init=function(){function c(a){var b=document.location.pathname,c=b.indexOf(";");if(-1==c)return null;c=b.indexOf(a+"\x3d",c);if(-1!=c)return c=c+a.length+1,a=b.indexOf(";",c),-1==a&&(a=b.indexOf("/",c)),-1==a&&(a=b.length),decodeURIComponent(b.substring(c,a))}function d(a){var b=document.location.search;if(null==b||2>b.length)return null;var c=b.indexOf(a+"\x3d");if(-1!=c)return c=c+a.length+1,a=b.indexOf("\x26",c),-1==a&&(a=b.length),decodeURIComponent(b.substring(c,
a))}var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(a){if(!a.connectionCount||0>=a.connectionCount)a.connectionCount=3;a.connectionTimeout||(a.connectionTimeout=2E3);a.pool=a.createConnectionPool(a.connectionCount,a.connectionTimeout);if((null==a.sid||""==a.sid)&&null!=a.tracking_cookie)a.sid=a.util.getCookie(a.tracking_cookie);if(null==a.sid&&null!=a.tracking_param&&(a.sid=c(a.tracking_param),null==a.sid||""==a.sid))a.sid=d(a.tracking_param);null==a.tracking_cookie&&(a.tracking_cookie=
"OMCtrack");if(null==a.sid||""==a.sid)a.sid=a.util.getCookie(a.tracking_cookie);if(null==a.sid||""==a.sid){var b="";a.tracking_cookie_domain&&(b+="; domain\x3d"+a.tracking_cookie_domain);b=a.tracking_cookie_path?b+("; path\x3d"+a.tracking_cookie_path):b+"; path\x3d/";a.tracking_cookie_expires&&(b+="; expires\x3d"+a.tracking_cookie_expires);a.sid="bgen"+parseInt(2147418112*Math.random())+(new Date).getTime();try{document.cookie=a.tracking_cookie+"\x3d"+a.sid+b}catch(g){a.debug&&console.log("apmeum.js: unable to set/preserve cookie due to exception: "+
g)}}var e=function(a,b,c){return!a?!1:a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?(a.attachEvent("on"+b,c),!0):!1};"image"!=a.transType&&e(window,"unload",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)a.spa.collectLastPgUpdate(),a.option.sendAll(!0)});a.gOldOnError=window.onerror;window.onerror=function(a,b,c,d,e){var g=(new Date).getTime(),q=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(q)return q.option.collectErrors(a,
b,c,d,e,g),q.gOldOnError&&"function"===typeof q.gOldOnError?q.gOldOnError(a,b,c,d,e):!1};window.performance||(a.pageReady=Number(new Date));var l=setInterval(function(){if("complete"===document.readyState){clearInterval(l);var a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;a&&a.option.collectPage()}},10);a.util.addEventCrossBrowser=e;a.needMonitor(16)&&(!a.dontTrackHistory||!1==a.dontTrackHistory)&&a.spa.trackHistory();a.needMonitor(16)&&a.spa.trackPgUpdate();window.performance||
(String.prototype.hashCode=function(){var a=0,b;if(0==this.length)return a;for(var c=0;c<this.length;c++)b=this.charCodeAt(c),a=(a<<5)-a+b,a|=0;return a},e(window,"DOMContentLoaded",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)a.domReady=Number(new Date)}),e(window,"beforeunload",function(a){if(a=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null)document.cookie="apmeum-navigationStart\x3d"+a.time()+"; path\x3d/",document.cookie="apmeum-pd\x3d"+document.URL.hashCode()+
"; path\x3d/",document.cookie="apmeum-pr\x3d"+document.referrer.hashCode()+"; path\x3d/"}));a.getHttpHeader=function(a,b){var c="\n"+a.getAllResponseHeaders()+"\n",d=c.toLowerCase().indexOf("\n"+b.toString().toLowerCase()+":"),e=null,g=null;0<=d&&(g=c.indexOf("\n",d+1),e=c.substr(d+b.length+2,g-d-b.length-2).trim());return e};a.handleAjaxComplete=function(a){var b=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(b){var c=b.getHttpHeader(a,"Content-Length");a.apmeum_respLength=c&&
0<c?c:!a.responseType||""==a.responseType||"text"==a.responseType?a.responseText&&a.responseText.length?a.responseText.length:0:0;if(c=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_OPERATION_ID))a.apmeum_operationId=c;if(c=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_ECID))a.apmeum_ecid=c;if(b=b.getHttpHeader(a,b.KEY_RESPONSE_HEADER_AGENT_TAG))a.apmeum_webappTag=b}};a.last_fetch_req_url={};a.same_fetch_req_count=0;a.fetchHandler=function(a,b){var c={},d=document.createElement("a"),e=window.apmeum?window.apmeum:
document.apmeum?document.apmeum:null;c.apmeum_startTime=e.time();c.apmeum_status="load";c.apmeum_syncMode="fetch";e.spa.recordFetchStartForPgUpdate(c.apmeum_startTime);"object"===typeof a&&a instanceof window.Request?(d.href=a.url,c.apmeum_method=b&&b.method||a.method||"GET",c.apmeum_sentLength=0):(d.href=a,c.apmeum_method=b&&b.method||"GET",c.apmeum_sentLength=a.length);d=e.util.parseUrl(""+d.href);if(d.path&&0<d.path.split("?",1).join("?").indexOf("/APMaaSCollector/"))return e.orig_fetch.apply(this,
arguments);e.rewriteURL("ajax",d);c.apmeum_host=d.host;c.apmeum_path=d.path;c.apmeum_url=c.apmeum_host+c.apmeum_path;try{var g=e.orig_fetch.apply(this,arguments);e.spa.capturePgUpdateRelatedAjax(c);c.dt=e.eventAttributes.getPageName();c.a1=e.eventAttributes.getAttr1();c.a2=e.eventAttributes.getAttr2();c.a3=e.eventAttributes.getAttr3();var q=function(a,c,b){function d(){5<e.same_fetch_req_count||(b.getAllResponseHeaders=function(){var a="";for(header in b.fetchResponse.headers)a+=header[0]+":"+header[1]+
"\n";return a},e.handleAjaxComplete(b),b.apmeum_endTime=e.time(),"load"===b.apmeum_status&&(b.apmeum_status="complete",e.spa.dealWithAjaxForPgUpdate(b),e.option.collectCalls(b)))}return function(){var a,h;try{for(a=c.apply(this,arguments);h&&!h._apmHasOnFulFilled;)h=h._apmNextPromise;h||(a instanceof window.Promise?a.then=l(a,a.then,b):d());return a}catch(e){for(;h&&!h._apmHasOnRejected;)h=h._apmNextPromise;h||d();throw e;}}},l=function(a,b,c){return a._apmNextPromise?b:function(){var d=Array.prototype.slice.call(arguments);
0<d.length&&("function"===typeof d[0]&&(d[0]=q(a,d[0],c),a._apmHasOnFulFilled=!0),1<d.length&&"function"===typeof d[1]&&(d[1]=q(a,d[1],c),a._apmHasOnRejected=!0));d=b.apply(a,d);a._apmNextPromise=d;d.then=l(d,d.then,c);return d}};g.then=l(g,g.then,c);return g.then(function(a){if(a.status&&204===a.status)if(e.last_fetch_req_url&&c.apmeum_url===e.last_fetch_req_url)if(e.same_fetch_req_count++,5==e.same_fetch_req_count)c.bl=1;else{if(5<e.same_fetch_req_count)return a}else e.last_fetch_req_url=c.apmeum_url,
e.same_fetch_req_count=1;c.apmeum_statuscode=a.status;c.fetchResponse=a;c.apmeum_respTime=e.time();e.spa.recordFirstByteForPgUpdate(c,c.apmeum_respTime);return a},function(a){a&&("AbortError"===a.name||20===a.code)?(c.apmeum_status="abort",e.spa.dealWithAbort(c),c.apmeum_status_msg="detect ajax aborted"):(c.apmeum_status="error",e.spa.dealWithError(c),c.apmeum_status_msg="detect ajax error");e.option.collectCalls(req);throw a;})}catch(m){throw c.apmeum_status="error",c.apmeum_status_msg="detect fetch open error",
e.spa.dealWithError(c),e.option.collectCalls(req),m;}};a.last_xhr_url={};a.same_xhr_count=0;a.XMLHttpRequestHandler=function(){var b,c={timing:{},initiator:"xhr"},d,g,l=document.createElement("a");b=new a.orig_xhr;d=b.open;g=b.send;b.open=function(a,g,m,r,n){if(!g||0<g.split("?",1).join("?").indexOf("/APMaaSCollector/"))return d.apply(b,arguments);var k=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(k){a||(a="");g||(g="");r||(r="");var w=!1!==m?"async":"sync",A;if(b.hasOwnProperty("apmeum_opencalls"))b.apmeum_opencalls++;
else{b.apmeum_method=a;b.apmeum_opencalls=1;k.spa.capturePgUpdateRelatedAjax(b);l.href=g;var x=k.util.parseUrl(""+l.href);k.rewriteURL("ajax",x);b.apmeum_host=x.host;b.apmeum_path=x.path;b.apmeum_url=b.apmeum_host+b.apmeum_path;b.apmeum_syncMode=w;b.apmeum_user=r;b.dt=k.eventAttributes.getPageName();b.a1=k.eventAttributes.getAttr1();b.a2=k.eventAttributes.getAttr2();b.a3=k.eventAttributes.getAttr3();b.async=void 0==m||!0==m?!0:!1;e(b,"readystatechange",function(){b.readyState===k.XMLHttpRequestHandler.HEADERS_RECEIVED&&
0!==b.status&&(b.apmeum_respTime=k.time(),k.spa.recordFirstByteForPgUpdate(b));if(b.readyState===k.XMLHttpRequestHandler.DONE&&0!==b.status){if(b.status&&204===b.status)if(k.last_xhr_url&&b.apmeum_url===k.last_xhr_url)if(k.same_xhr_count++,5==k.same_xhr_count)b.bl=1;else{if(5<k.same_xhr_count)return}else k.last_xhr_url=b.apmeum_url,k.same_xhr_count=1;k.handleAjaxComplete(b);b.apmeum_endTime=k.time();b.apmeum_statuscode=b.status;k.spa.dealWithAjaxForPgUpdate(b);k.option.collectCalls(b)}});e(b,"load",
function(){b.apmeum_status="load";b.measurement.status=b.status});e(b,"timeout",function(){b.hasOwnProperty("apmeum_respTime")||(b.apmeum_respTime=k.time());b.hasOwnProperty("apmeum_endTime")||(b.apmeum_endTime=k.time());b.hasOwnProperty("apmeum_respLength")||(b.apmeum_respLength=0);b.apmeum_status="timeout";k.spa.dealWithTimeout(b);b.measurement.status="detect a timeout ajax call";k.option.collectCalls(b)});e(b,"error",function(){b.hasOwnProperty("apmeum_respTime")||(b.apmeum_respTime=k.time());
b.hasOwnProperty("apmeum_endTime")||(b.apmeum_endTime=k.time());b.hasOwnProperty("apmeum_respLength")||(b.apmeum_respLength=0);b.apmeum_status="error";k.spa.dealWithError(b);b.measurement.status="detect ajax error";k.option.collectCalls(b)});e(b,"abort",function(){b.hasOwnProperty("apmeum_respTime")||(b.apmeum_respTime=k.time());b.hasOwnProperty("apmeum_endTime")||(b.apmeum_endTime=k.time());b.hasOwnProperty("apmeum_respLength")||(b.apmeum_respLength=0);b.apmeum_status="abort";k.spa.dealWithAbort(b);
b.measurement.status="detect ajax aborted";k.option.collectCalls(b)})}try{A=d.apply(b,arguments)}catch(y){c.status=k.XHR_OPEN_FAILED}return A}};b.send=function(a){var d=window.apmeum?window.apmeum:document.apmeum?document.apmeum:null;if(d&&(this.apmeum_startTime=d.time(),this.apmeum_sentLength=a?a.length:0,"undefined"===typeof c.status||c.status!==d.XHR_OPEN_FAILED))return!1==b.async&&(b.apmeum_respTime=this.apmeum_startTime),d.spa.recordFetchStartForPgUpdate(this.apmeum_startTime),!1==b.async&&d.spa.recordFirstByteForPgUpdate(b,
this.apmeum_startTime),g.apply(b,arguments)};b.measurement=c;return b};if(a.needMonitor(2)){if(!a.orig_xhr&&window.XMLHttpRequest){var b=new XMLHttpRequest,m=!1;b.addEventListener?m=!0:b.attachEvent&&(m=!0);m&&(a.orig_xhr=window.XMLHttpRequest,a.orig_xhr_proto=window.XMLHttpRequest.prototype,a.XMLHttpRequestHandler.UNSENT=0,a.XMLHttpRequestHandler.OPENED=1,a.XMLHttpRequestHandler.HEADERS_RECEIVED=2,a.XMLHttpRequestHandler.LOADING=3,a.XMLHttpRequestHandler.DONE=4,a.XMLHttpRequestHandler.prototype=
window.XMLHttpRequest.prototype,window.XMLHttpRequest=a.XMLHttpRequestHandler)}a.orig_fetch||(a.orig_fetch=window.fetch,"function"!==typeof window.fetch||"function"!==typeof window.Request||"function"!==typeof window.Response||"function"!==typeof window.Promise||window.fetch.polyfill?console.log("apmeum.js: not instrumenting fetch since it doesn't seem to be present"):window.fetch=a.fetchHandler)}!0==a.cmp&&"image"==a.transType&&a.debug&&console.log("apmeum.js: If transport type is 'image', combined post will not be supported, as 'image' send GET request only");
if("beacon"==a.transType&&!1 in navigator||"fetch"==a.transType&&!window.fetch)a.debug&&console.log("apmeum.js: Transport type "+a.transType+" is not supported in this browser"),a.transType=a.getDefaultTransportType();if(!a.transType||"beacon"!=a.transType&&"fetch"!=a.transType&&"image"!=a.transType)a.transType=a.getDefaultTransportType();void 0==a.cmp&&(a.cmp=!0);window.getSDKVersionFile&&window.sdkFilePath&&(a.forceGetPageTitle=!0,a.forceGetPageTitleMaxRetryCount=10)}},apmeum.init());